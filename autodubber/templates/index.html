<form>
  <label for="video-url">Enter video URL:</label>
  <input style='width:350px;' type="text" id="video-url" name="video-url">
  <input type="submit" value="Submit">
</form>

<div id="progress-bar" style="display:none;">
  <img width='10%' src='https://hackernoon.com/images/0*4Gzjgh9Y7Gu8KEtZ.gif' />

</div>

<video id="video" style="display:none" controls>
  Your browser does not support the video tag.
</video>

<script>

  function YouTubeGetID(url) {
    url = url.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
    return (url[2] !== undefined) ? url[2].split(/[^0-9a-z_\-]/i)[0] : url[0];
  }

  var form = document.querySelector("form");
  var video = document.querySelector("video");
  var progressBar = document.querySelector("#progress-bar");
  var bar = document.querySelector("#bar");

  form.addEventListener("submit", function (event) {
    event.preventDefault();
    video.addEventListener("canplaythrough", function () {
      progressBar.style.display = "none";
      video.style.display = "block";
    });

    var videoUrl = document.querySelector("#video-url").value;
    var videoID = YouTubeGetID(videoUrl);

    fetch('/process?video_id=' + videoID)

    video.src = '/videos/' + videoID + '.mp4';
    console.log(video.src);
    video.style.display = "none";
    progressBar.style.display = "block";
    bar.style.width = "0%";
  });
  
</script>